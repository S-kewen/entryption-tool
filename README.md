# entryption-tool
## 簡介
利用資料庫保存0~100000000的所有雜湊值記錄，模擬大量資料的情況下進行分表分庫設計，進行資料分散式研究。

## 什麼是資料分散式?
集中式資料庫系統（Centralized Database, CDB）：
將資料集中儲存在一台資料庫伺服器，這樣容易管理資料但是風險較高，資料傳輸率容易受網路流量影響，而且所有資料都集中給一台伺服器處理，所以伺服器的負擔很重

分散式資料庫系統（Distributed Database, DDB）：
將資料依照特性分散儲存在不同的資料庫伺服器，再以網路將這些伺服器連接起來，

## 什麼是CAP理論?
![](https://upload.cc/i1/2021/06/06/bstqf4.png)

所謂 CAP 理論以中文有名的諺語來說就是「魚與熊掌不可兼得」在分散式系統中不可能同時滿足 CAP 三者。CAP （C (一致性),、A (可用性)、P (分區容忍)）三者只能擇其二（或是勉強都達到一點點點），也就是選擇了 P，就只能再從 C, A 中二選一，如果 CA 都要拿，那就都會無法做到完美。

## 如何實現資料分散式?
我們一般是透過中間件的方式來實現資料分散式，常見的分散式資料庫中間件有TDDL、Amoeba、Cobar、MyCat等，本項目透過MyCat來實現。
## 什麼是MyCat？
官網：http://www.mycat.org.cn/

MyCat 是一個徹底開源的，面向企業應用開發的“大資料庫集群” 支援事務、ACID、可以替代Mysql的加強版資料庫。

## 資料分散式有什麼特點？
* 性能：能輕鬆面對海量資料和高併發的請求處理，好的分散式資料庫能做到90%以上的線性增長能力；
* 靈活性、彈性：現代的系統的業務和使用場景變化很快，用戶的增長也有很多不確定因素。彈性擴容就非常重要。分散式資料庫本身有Cloud-Ready的特性，能很容以通過添加設備擴容滿足需求，而不需要影響開發；
* 多中心、多活：這點在大型應用中很常見，分散式資料庫就更容易實現這個功能，當然這裡涉及到分散式資料庫的同步和一致性的能力，這也是判斷分散式資料庫好壞的一個重要指標。
* 讀寫分離：主從節點都能發揮作用；例如巨杉SequoiaDB資料庫，能在一組三副本的複製組上實現OLTP，NoSQL應用，OLAP多種應用場景同時使用。
* 低成本：x86伺服器，SATA存儲（部分可以用SSD），加上較好的網路頻寬就可以了。

## 什麼是分庫分表？
其實就是字面意思，很好理解：
* 分庫：從單個資料庫拆分成多個資料庫的過程，將資料散落在多個資料庫中。
* 分表：從單張表拆分成多張表的過程，將資料散落在多張表內。

## 為什麼需要分庫分表？
* 從性能上看

隨著單庫中的資料量越來越大、資料庫的查詢QPS越來越高，相應的，對資料庫的讀寫所需要的時間也越來越多。
資料庫的讀寫性能可能會成為業務發展的瓶頸。對應的，就需要做資料庫性能方面的優化

* 從可用性上看

單個資料庫如果發生意外，很可能會丟失所有資料。尤其是雲時代，很多資料庫都跑在虛擬機器上，如果虛擬機器/宿主機發生意外，則可能造成無法挽回的損失。因此，除了傳統的 Master-Slave、Master-Master 等部署層面解決可靠性問題外，我們也可以考慮從資料拆分層面解決此問題。
此處我們以資料庫宕機為例：
* 單庫部署情況下，如果資料庫宕機，那麼故障影響就是100%，而且恢復可能耗時很長。
* 如果我們拆分成2個庫，分別部署在不同的機器上，此時其中1個庫宕機，那麼故障影響就是50%，還有50%的資料可以繼續服務。
* 如果我們拆分成4個庫，分別部署在不同的機器上，此時其中1個庫宕機，那麼故障影響就是25%，還有75%的資料可以繼續服務，恢復耗時也會很短。
當然，我們也不能無限制的拆庫，這也是犧牲存儲資源來提升性能、可用性的方式，畢竟資源總是有限的。


